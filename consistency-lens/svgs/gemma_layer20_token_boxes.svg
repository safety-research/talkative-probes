<svg width="1500" height="590" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="layerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="matrixGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:0.8" />
      <stop offset="50%" style="stop-color:#f97316;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ea580c;stop-opacity:0.8" />
    </linearGradient>
    
    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
    
    <filter id="softGlow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#92400e" />
    </marker>
  </defs>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap');
    
    .title { font-family: 'Inter', sans-serif; font-size: 22px; font-weight: 600; fill: #451a03; }
    .label { font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 500; fill: #78350f; }
    .code { font-family: 'JetBrains Mono', monospace; font-size: 14px; fill: #451a03; }
    .token { font-family: 'JetBrains Mono', monospace; font-size: 13px; }
    .decoded { font-family: 'JetBrains Mono', monospace; font-size: 11px; fill: #92400e; }
    .index { font-family: 'JetBrains Mono', monospace; font-size: 10px; fill: #b45309; }
    
    .normal { fill: #451a03; }
    .error { fill: #dc2626; font-weight: 500; }
    .error-decoded { fill: #dc2626; }
    .correction-decoded { fill: #059669; }
    .prompt { fill: #6366f1; }
  </style>
  
  <!-- Background -->
  <rect width="1600" height="600" fill="#fef3c7" />
  
  <!-- Title -->
  <text x="800" y="40" text-anchor="middle" class="title">Talkative probes as textual autoencoders (on Gemma-2-2B, 26 layers)</text>
  
  <!-- Input Panel -->
  <g transform="translate(100, 190)">
    <text x="150" y="0" text-anchor="middle" class="label"><tspan font-weight="bold"  font-family="JetBrains Mono" font-size="16" fill="#991b1b">Input Prompt</tspan></text>
    
    <rect x="0" y="20" width="340" height="200" rx="8" fill="#fffbeb" stroke="#f59e0b" stroke-width="1" filter="url(#shadow)"/>
    
    <!-- Special tokens and tokenized prompt with boxes -->
    <g transform="translate(15, 45)">
      <!-- Special tokens row -->
      <rect x="0" y="0" width="45" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="22" y="14" text-anchor="middle" class="token" font-size="12">&lt;bos&gt;</text>
      
      <rect x="50" y="0" width="90" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="95" y="14" text-anchor="middle" class="token" font-size="12">&lt;start_turn&gt;</text>
      
      <rect x="145" y="0" width="50" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="170" y="14" text-anchor="middle" class="token" font-size="12">user</text>
      
      <rect x="200" y="0" width="25" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="212" y="14" text-anchor="middle" class="token" font-size="12">\n</text>
    </g>
    
    <!-- User prompt tokens -->
    <g transform="translate(15, 70)">
      <rect x="0" y="0" width="50" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="25" y="14" text-anchor="middle" class="code">Please</text>
      
      <rect x="55" y="0" width="60" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="85" y="14" text-anchor="middle" class="code">improve</text>
      
      <rect x="120" y="0" width="25" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="132" y="14" text-anchor="middle" class="code">my</text>
      
      <rect x="150" y="0" width="40" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="170" y="14" text-anchor="middle" class="code">code</text>
      
      <rect x="195" y="0" width="15" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="202" y="14" text-anchor="middle" class="code">:</text>
      
      <rect x="215" y="0" width="15" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="222" y="14" text-anchor="middle" class="code">\n</text>
    </g>
    
    <!-- Code tokens (first line) -->
    <g transform="translate(15, 95)">
      <rect x="0" y="0" width="35" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="17" y="14" text-anchor="middle" class="code" font-size="12">def</text>
      
      <rect x="40" y="0" width="35" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="57" y="14" text-anchor="middle" class="code" font-size="12">add</text>
      
      <rect x="80" y="0" width="15" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="87" y="14" text-anchor="middle" class="code" font-size="12">(</text>
      
      <rect x="100" y="0" width="45" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="122" y="14" text-anchor="middle" class="code" font-size="12">left</text>
      
      <rect x="150" y="0" width="15" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="157" y="14" text-anchor="middle" class="code" font-size="12">,</text>
      
      <rect x="170" y="0" width="55" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="197" y="14" text-anchor="middle" class="code" font-size="12">right</text>
      
      <rect x="230" y="0" width="25" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="242" y="14" text-anchor="middle" class="code" font-size="12">):</text>
    </g>
    
    <!-- Code tokens (second line with error) -->
    <g transform="translate(15, 125)">
      <rect x="0" y="0" width="60" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="30" y="14" text-anchor="middle" class="code" font-size="12">return</text>
      
      <rect x="65" y="0" width="45" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="87" y="14" text-anchor="middle" class="code" font-size="12">left</text>
      
      <rect x="115" y="0" width="15" height="20" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
      <text x="122" y="14" text-anchor="middle" class="code" font-size="12">+</text>
      
      <rect x="135" y="0" width="20" height="20" rx="4" fill="#ffedd5" stroke="#dc2626" stroke-width="2"/>
      <text x="145" y="14" text-anchor="middle" class="code error" font-size="12">ri</text>
      
      <rect x="160" y="0" width="15" height="20" rx="4" fill="#ffedd5" stroke="#dc2626" stroke-width="2"/>
      <text x="167" y="14" text-anchor="middle" class="code error" font-size="12">h</text>
      
      <rect x="180" y="0" width="25" height="20" rx="4" fill="#ffedd5" stroke="#dc2626" stroke-width="2"/>
      <text x="192" y="14" text-anchor="middle" class="code error" font-size="12">gt</text>
    </g>

    <!-- End tokens and model response -->
    <g transform="translate(15, 155)">
      <rect x="0" y="0" width="20" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="10" y="14" text-anchor="middle" class="token" font-size="12">\n</text>
      
      <rect x="25" y="0" width="85" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="67" y="14" text-anchor="middle" class="token" font-size="12">&lt;end_turn&gt;</text>
      
      <rect x="115" y="0" width="20" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="125" y="14" text-anchor="middle" class="token" font-size="12">\n</text>
      
      <rect x="140" y="0" width="90" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="185" y="14" text-anchor="middle" class="token" font-size="12">&lt;start_turn&gt;</text>
      
      <rect x="235" y="0" width="50" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="260" y="14" text-anchor="middle" class="token" font-size="12">model</text>
      
      <rect x="290" y="0" width="20" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="300" y="14" text-anchor="middle" class="token" font-size="12">\n</text>
    </g>
    
    <!-- Model response tokens -->
    <g transform="translate(15, 180)">
      <rect x="0" y="0" width="25" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="12" y="14" text-anchor="middle" class="token">Of</text>
      
      <rect x="30" y="0" width="50" height="20" rx="4" fill="#f3f4f6" stroke="#a3a3a3" stroke-width="1"/>
      <text x="55" y="14" text-anchor="middle" class="token">course</text>
    </g>
  </g>
  
  
  <!-- Arrow -->
  <!-- <path d="M 420 300 L 480 300" stroke="#92400e" stroke-width="2" marker-end="url(#arrow)"/> -->
  <!-- <text x="450" y="180" text-anchor="middle" class="label" font-size="11">forward pass</text> -->
   <!-- Arrow: super wide/tall arrowhead and very wide base, points right -->
  <!-- Arrow shaft -->
  <g transform="translate(460, 260)">
  <rect x="0" y="0" width="10" height="40" fill="#92400e"/>
  <!-- Super wide arrowhead with wide base -->
  <g transform="translate(8, -20)">
  <polygon points="0,0 20,40 0,80 0,20" fill="#92400e"/>
  </g>

    <g transform="translate(12, 63) rotate(90)">
      <text x="0" y="0" font-size="8" font-family="JetBrains Mono, monospace" fill="#92400e" font-weight="bold">
        extract each </text>
        <text x="0" y="8" font-size="8" font-family="JetBrains Mono, monospace" fill="#92400e" font-weight="bold">
        activation vector A</text>
    </g>
  </g>
  
  <!-- Layer 20 - Matrix visualization -->
  <g transform="translate(510, 200)">
    <text x="70" y="-10" text-anchor="middle" class="label"><tspan font-weight="bold"  font-family="JetBrains Mono" font-size="16" fill="#991b1b">Interpreted model</tspan></text>
    
    <!-- Background for all layers -->
    <rect x="0" y="0" width="140" height="220" rx="8" fill="#f3f4f6" filter="url(#shadow)" opacity="0.3"/>
        <!-- Token representations -->

    <!-- Layer indicators -->
    <g transform="translate(10, 10)">
      <!-- Layers 26-21 (grayed out) -->
      <rect x="0" y="0" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      <text x="-15" y="6" text-anchor="end" class="label" font-size="10" fill="#9ca3af">26</text>
      <rect x="0" y="12" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      <rect x="0" y="24" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      
      <!-- Layer 20 - highlighted activation row -->
      <g transform="translate(-5, 36)">
        <rect x="0" y="0" width="130" height="25" rx="4" fill="url(#matrixGrad)" filter="url(#softGlow)"/>
        
        <!-- Activation cells within Layer 20 -->
        <g transform="translate(5, 5)">
          <rect x="0" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.7"/>
          <rect x="18" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.9"/>
          <rect x="36" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.8"/>
          <rect x="54" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.6"/>
          <rect x="72" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.7"/>
          <rect x="90" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.8"/>
          <rect x="108" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.6"/>
        </g>
        
        <!-- <text x="65" y="17" text-anchor="middle" class="label" font-size="12" fill="#fef3c7" font-weight="600">Layer 20</text> -->
      </g>
      
      <!-- Layers 19-1 (grayed out) -->
      <rect x="0" y="67" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      <rect x="0" y="79" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      <rect x="0" y="91" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      
      <!-- ... indicator -->
      <text x="60" y="115" text-anchor="middle" fill="#9ca3af" font-size="16">···</text>
      
      <!-- More layers (grayed out) -->
      <rect x="0" y="130" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      <rect x="0" y="142" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      <text x="-15" y="53" text-anchor="end" class="label" font-size="10" fill="#9ca3af">20</text>
      <rect x="0" y="154" width="120" height="8" rx="2" fill="#e5e7eb" opacity="0.5"/>
      <text x="-15" y="160" text-anchor="end" class="label" font-size="10" fill="#9ca3af">0</text>
    </g>

        <g transform="translate(2, 190)">
      <rect x="0" y="0" width="18" height="18" rx="2" fill="f3f4f6" opacity="0.4"/>
      <rect x="20" y="0" width="18" height="18" rx="2" fill="f3f4f6" opacity="0.5"/>
      <rect x="40" y="0" width="18" height="18" rx="2" fill="f3f4f6" opacity="0.6"/>
      <rect x="60" y="0" width="18" height="18" rx="2" fill="f3f4f6" opacity="0.7"/>
      <rect x="80" y="0" width="18" height="18" rx="2" fill="f3f4f6" opacity="0.6"/>
      <rect x="100" y="0" width="18" height="18" rx="2" fill="f3f4f6" opacity="0.4"/>
      <rect x="120" y="0" width="18" height="18" rx="2" fill="f3f4f6" opacity="0.5"/>
    </g>


    
    

  </g>
  <!-- Arrow: super wide/tall arrowhead and very wide base, points right -->
  <!-- Arrow shaft -->
  <g transform="translate(670, 240)">
    <rect x="0" y="0" width="10" height="40" fill="#92400e"/>
    <!-- D in the middle of the arrow -->
    <!-- Super wide arrowhead with wide base -->
    <g transform="translate(8, -20)">
      <polygon points="0,0 20,40 0,80 0,20" fill="#92400e"/>
    </g>
    <text x="12" y="22" text-anchor="middle" alignment-baseline="middle" font-size="18" font-family="JetBrains Mono, monospace" font-weight="bold" fill="white">D</text>
    <!-- Sideways label under the arrow -->
    <g transform="translate(20, 80) rotate(90)">
      <text x="0" y="0" font-size="8" font-family="JetBrains Mono, monospace" fill="#92400e" font-weight="bold">
        patch each activation </text>
        <text x="0" y="8" font-size="8" font-family="JetBrains Mono, monospace" fill="#92400e" font-weight="bold">
        vector into D. For</text>
        <text x="0" y="16" font-size="8" font-family="JetBrains Mono, monospace" fill="#92400e" font-weight="bold">
         each A, generate text</text>
    </g>
  </g>
  <!-- <text x="650" y="180" text-anchor="middle" class="label" font-size="11">decoded</text> -->
  
  <!-- Decoded Activations -->
  <g transform="translate(720, 50)">
    
    <rect x="0" y="20" width="510" height="450" rx="8" fill="#fffbeb" stroke="#f59e0b" stroke-width="1" filter="url(#shadow)"/>
    <text x="250" y="55" text-anchor="middle" class="label"> <tspan font-weight="bold"  font-family="JetBrains Mono" font-size="16" fill="#991b1b">Bottleneck text (autoregressively decoded activations from layer 20)</tspan></text>
    <!-- Key tokens and their decodings -->
    <g transform="translate(20, 90)">
      <!-- Context tokens -->
      <g>
        <g>
          <rect x="0" y="-12" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="0" text-anchor="middle" class="index">11</text>
        </g>
        <text x="30" y="0" class="token normal">def</text>
        <text x="80" y="0" class="decoded">→ def Python MyAlgorithm Function Pagination classifyMydef</text>
        
        <g>
          <rect x="0" y="13" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="25" text-anchor="middle" class="index">12</text>
        </g>
        <text x="30" y="25" class="token normal">add</text>
        <text x="80" y="25" class="decoded">→ AddPython AddingFunction ArithmeticArrayActivityPairs add</text>
      </g>
      
      <!-- Separator -->
      <line x1="0" y1="45" x2="480" y2="45" stroke="#fed7aa" stroke-width="1"/>
      
      <!-- Error tokens -->
      <g transform="translate(0, 65)">
        <rect x="-10" y="-15" width="600" height="140" rx="5" fill="#fee2e2" fill-opacity="0.3"/>
        <text x="0" y="0" class="label" font-size="12">in typo:</text>
        
        <g>
          <rect x="0" y="18" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="30" text-anchor="middle" class="index">23</text>
        </g>
        <text x="30" y="30" class="token error">ri</text>
        <text x="80" y="30" class="decoded">→ ri sumNUMBERCodeNumeric,FieldValue out ri</text>
        
        <g>
          <rect x="0" y="43" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="55" text-anchor="middle" class="index">24</text>
        </g>
        <text x="30" y="55" class="token error">h</text>
        <text x="80" y="55" class="decoded">→ rihhih <tspan class="error-decoded">Syntax Python</tspan> Object, Namechildsh</text>
        
        <g>
          <rect x="0" y="68" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="80" text-anchor="middle" class="index">25</text>
        </g>
        <text x="30" y="80" class="token error">gt</text>
        <text x="80" y="80" class="decoded">→ <tspan class="correction-decoded">right</tspan> pythonValueVariablePLUS |\n\ngtgt</text>
        
        <g>
          <rect x="0" y="93" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="105" text-anchor="middle" class="index">26</text>
        </g>
        <text x="30" y="105" class="token normal">\n</text>
        <text x="80" y="105" class="decoded">→ 5 Python code <tspan class="error-decoded">errorFunctionMistake</tspan> …..missing |\n</text>
      </g>
      
      <!-- Separator -->
      <line x1="0" y1="210" x2="480" y2="210" stroke="#fed7aa" stroke-width="1"/>
      
      <!-- Response tokens -->
      <g transform="translate(0, 230)">
        <rect x="-10" y="-15" width="600" height="110" rx="5" fill="#dcfce7" fill-opacity="0.3"/>
        <text x="0" y="0" class="label" font-size="12">in response:</text>
        
        <g>
          <rect x="0" y="18" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="30" text-anchor="middle" class="index">31</text>
        </g>
        <text x="30" y="30" class="token normal">model</text>
        <text x="80" y="30" class="decoded">→ TypeScript <tspan class="correction-decoded">mistake correction</tspan> You and your answer   model</text>
        
        <g>
          <rect x="0" y="43" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="55" text-anchor="middle" class="index">32</text>
        </g>
        <text x="30" y="55" class="token normal">\n</text>
        <text x="80" y="55" class="decoded">→ python mistake spelling mistake identifier delimiter typo\n </text>
        
        
        <g>
          <rect x="0" y="68" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="80" text-anchor="middle" class="index">33</text>
        </g>
        <text x="30" y="80" class="token normal">Of</text>
        <text x="80" y="80" class="decoded">→ O <tspan class="correction-decoded">Fix FYI Error</tspan> obviously, obviouslyOf</text>
        
        <g>
          <rect x="0" y="93" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="105" text-anchor="middle" class="index">34</text>
        </g>
        <text x="30" y="105" class="token normal">course</text>
        <text x="80" y="105" class="decoded">→ \n\nOfcourse <tspan class="correction-decoded">Yes Python glad! help</tspan> course</text>
      </g>
    </g>
  </g>

   <!-- Main description: Goal and method -->
  <g transform="translate(50, 60)">
    <rect x="0" y="0" width="650" height="92" rx="8" fill="#fffbeb" stroke="#f59e0b" stroke-width="1" filter="url(#shadow)"/>
    <text x="20" y="28" class="label" font-size="11" font-weight="600">
      <tspan font-weight="bold">Goal:</tspan>
      Interpret activation vectors (<tspan font-family="JetBrains Mono" font-size="11">A</tspan>). Force through a textual bottleneck and  reconstruct (<tspan font-family="JetBrains Mono" font-size="11">Â</tspan>).
    </text>
    <text x="20" y="50" class="label" font-size="11">
     Use two copies of base model as encoder and decoder, train <tspan font-weight="bold" font-size="14">only</tspan> affine (patching) maps + prompts.
     <tspan x="20" dy="1.5em"> Relies on <tspan font-weight="bold" font-size="14">language-modelling prior</tspan> to avoid steganography. Transfers without tuning to IT-model</tspan>
    </text>
  </g>
  <g transform="translate(50, 440)">
    <rect x="0" y="0" width="650" height="100" rx="8" fill="#fffbeb" stroke="#f59e0b" stroke-width="1" filter="url(#shadow)"/>
    <text x="20" y="30" class="label" font-size="11">We can finetune and extend the bottleneck to 32+ tokens. E.g. on token 26, layer 20:</text>
    <g transform="translate(20, 60)">
        <g>
          <rect x="0" y="-12" width="20" height="16" rx="4" fill="#fed7aa" stroke="#f59e0b" stroke-width="1"/>
          <text x="10" y="0" text-anchor="middle" class="index" font-size="11">26</text>
        </g>
        <text x="30" y="0" class="token normal" font-size="11">\n</text>
        <text x="60" y="0" class="decoded" font-size="11">
            <tspan>→ 4 Python Python Error, misp language/ Video, Sentence, the Sentence is Right </tspan>
            <tspan x="60" dy="1.5em">Wrong Solution in Python line Syntax Error Headline Syntax ERROR 2 – Mistake\nWrong\n</tspan>
        </text>
    </g>
  </g>


  <!-- Reconstruction arrow and metrics -->
  <g transform="translate(1220, 250)">
      <g transform="translate(40, -13) rotate(90)">
      <text x="0" y="0" font-size="8" font-family="JetBrains Mono, monospace" fill="#92400e" font-weight="bold">
         concatenate tokens with</text>
        <text x="0" y="8" font-size="8" font-family="JetBrains Mono, monospace" fill="#92400e" font-weight="bold">
         soft prompt and extract </text>
        <text x="0" y="16" font-size="8" font-family="JetBrains Mono, monospace" fill="#92400e" font-weight="bold">
         activation vector Â</text>
    </g>
    <!-- Text about MSE -->
    <g transform="translate(140, -150)">
    <text x="0" y="-2" text-anchor="middle" class="label" font-size="18" font-weight="1000">
      <tspan font-weight="bold" font-family="JetBrains Mono, monospace" font-size="16" fill="#991b1b">objective:</tspan>
    </text>
    <text x="0" y="15" text-anchor="middle" class="label" font-size="16">
      <tspan font-family="JetBrains Mono, monospace" font-weight="bold">minimise MSE(A, Â)</tspan>
    </text>
    </g>
    <!-- Reconstructed activations visualization -->
    <g transform="translate(80, -125)">
      <rect x="0" y="0" width="130" height="25" rx="4" fill="url(#matrixGrad)" filter="url(#softGlow)" opacity="0.9"/>
      
      <!-- Activation cells -->
      <g transform="translate(5, 5)">
        <rect x="0" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.9"/>
        <rect x="18" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.9"/>
        <rect x="36" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.9"/>
        <rect x="54" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.9"/>
        <rect x="72" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.9"/>
        <rect x="90" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.9"/>
        <rect x="108" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.9"/>
      </g>
      
      <!-- <text x="65" y="17" text-anchor="middle" class="label" font-size="11" fill="#fef3c7" font-weight="600">Reconstructed</text> -->
    </g>
    <!-- Arrow pointing right -->
    <g transform="translate(30, -65)">
      <rect x="0" y="0" width="7" height="28" fill="#92400e"/>
      <g transform="translate(6, -12)">
        <polygon points="0,0 13,28 0,56 0,14" fill="#92400e"/>
      </g>
      <text x="8" y="17" text-anchor="middle" alignment-baseline="middle" font-size="12" font-family="JetBrains Mono, monospace" font-weight="bold" fill="white">E</text>
    </g>
    <!-- Metrics box -->
    <g transform="translate(70, -90)">
      <rect x="0" y="0" width="160" height="80" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="1" filter="url(#shadow)"/>
      <text x="80" y="25" text-anchor="middle" class="label" font-weight="600">variance recovered</text>
      <text x="80" y="42" text-anchor="middle" class="label"> with 8 tokens</text>
      <text x="80" y="68" text-anchor="middle" font-family="JetBrains Mono" font-size="20" fill="#991b1b" font-weight="bold">69%</text>
    </g>
  </g>

  <g transform="translate(1350, 295)">
    <text x="0" y="0" font-weight="bold" font-family="JetBrains Mono" font-size="16" fill="#991b1b">OR</text>
  </g>

 <!-- Reconstruction arrow and metrics -->
  <g transform="translate(1220, 380)">
        <!-- Reconstructed activations visualization for 32 tokens -->
    <g transform="translate(80, 51)">
      <rect x="0" y="0" width="130" height="25" rx="4" fill="url(#matrixGrad)" filter="url(#softGlow)" opacity="0.9"/>
      
      <!-- Activation cells -->
      <g transform="translate(5, 5)">
        <rect x="0" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.8"/>
        <rect x="18" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.95"/>
        <rect x="36" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.85"/>
        <rect x="54" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.7"/>
        <rect x="72" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.8"/>
        <rect x="90" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.85"/>
        <rect x="108" y="0" width="15" height="15" rx="2" fill="#fef3c7" opacity="0.7"/>
      </g>
      
      <!-- <text x="65" y="17" text-anchor="middle" class="label" font-size="11" fill="#fef3c7" font-weight="600">Reconstructed</text> -->
    </g>
    
    <!-- Arrow pointing right -->
    <!-- <path d="M 0 0 L 60 0" stroke="#92400e" stroke-width="2" marker-end="url(#arrow)"/> -->
    <!-- <text x="30" y="-10" text-anchor="middle" class="label" font-size="10">reconstruct</text> -->
      <!-- Arrow pointing right -->
    <g transform="translate(30, -15)">
      <rect x="0" y="0" width="7" height="28" fill="#92400e"/>
      <g transform="translate(6, -12)">
        <polygon points="0,0 13,28 0,56 0,14" fill="#92400e"/>
      </g>
      <text x="8" y="17" text-anchor="middle" alignment-baseline="middle" font-size="12" font-family="JetBrains Mono, monospace" font-weight="bold" fill="white">E</text>
    </g>
    
    <!-- Metrics box -->
    <g transform="translate(70, -40)">
      <rect x="0" y="0" width="160" height="80" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="1" filter="url(#shadow)"/>
      <text x="80" y="25" text-anchor="middle" class="label" font-weight="600">variance recovered </text>
      <text x="80" y="42" text-anchor="middle" class="label"> with 32 tokens</text>
      <text x="80" y="68" text-anchor="middle" font-family="JetBrains Mono" font-size="20" fill="#991b1b" font-weight="bold">76%</text>
    </g>
  </g>
</svg>